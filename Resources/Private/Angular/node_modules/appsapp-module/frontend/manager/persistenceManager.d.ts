import 'rxjs/add/operator/map';
import { AngularFireDatabase } from "angularfire2/database";
import { Observer } from "rxjs/Observer";
import { FirebaseModel } from "../models/firebase";
export declare class PersistenceManager {
    storageWrapper: any;
    private firebaseDatabase;
    private firebaseModel;
    private observer;
    private observable;
    private _pendingChangesModels;
    constructor();
    /**
     * get persistence managers oberserver
     * @returns {Observer<any>}
     */
    getObserver(): Observer<any>;
    /**
     * connect with firebaseModel
     * @param {FirebaseModel} firebaseModel
     */
    setFirebase(firebaseModel: any): this;
    /**
     * get firebase
     * @returns {FirebaseModel}
     */
    getFirebase(): FirebaseModel;
    /**
     * get firebase user uuid
     * return string|null
     */
    getFirebaseUserId(): any;
    /**
     * get firebase database
     * @returns {AngularFireDatabase}
     */
    getFirebaseDatabase(): AngularFireDatabase;
    /**
     * storage ready promise
     * @returns {Promise<any>}
     */
    ready(): any;
    private initModelForFirebaseDatabase(model);
    /**
     * save one model to storage
     * @param model
     * @param {Observer} observer
     * @param action
     * @returns {Promise<any>}
     */
    action(model: any, observer: any, action: {
        name: string;
        data?: {};
    }): Promise<{}>;
    /**
     *
     * @param model
     * @param observer
     * @param action
     * @param resolve
     * @param reject
     * @returns void
     */
    private callAction(model, observer, action, resolve, reject);
    /**
     * save one model to storage
     * @param model
     * @param {Observer} observer
     * @param action
     * @param {boolean} localStorageOnly
     * @returns {Promise<any>}
     */
    save(model: any, observer: any, action?: {
        name: string;
        data?: {};
    }, localStorageOnly?: any): Promise<{}>;
    /**
     * prepare action data for transmitting
     * @param action
     * @param model
     * @returns {any}
     */
    private getActionDataWithIdentifier(action, model);
    /**
     * get hash
     * @param string
     */
    getHash(string: any): any;
    /**
     * load and autosave data model
     * @param model
     * @param any data
     * @returns {Promise<any>}
     */
    initAndload(model: any, data?: any): Promise<{}>;
    /**
     * load one model from storage
     * @param model
     * @param json
     * @returns {Promise<any>}
     */
    load(model: any, json?: any): Promise<{}>;
    /**
     * delete one model from storage
     * @param model
     * @returns {Promise<any>}
     */
    delete(model: any): Promise<{}>;
    /**
     * clone  model
     * @param model
     * @returns {Promise<any>}
     */
    clone(model: any): Promise<{}>;
    /**
     * Clear the entire key value store. WARNING: HOT!
     * @returns {Promise<any>}
     */
    clear(): Promise<{}>;
    /**
     * work pending changes
     * @param model
     * @returns {Promise<any>}
     */
    workOnPendingChanges(model: any): Promise<{}>;
    /**
     * mark model as has pending changes state
     * @param {any} action
     * @param model
     */
    addPendingChanges(model: any, action?: any): void;
    /**
     * update property from local storage
     * @param property
     * @param value
     * @param identifier
     * @returns {Promise<any>}
     */
    updatePropertyFromLocalStorage(property: any, value: any, identifier: any): Promise<{}>;
    /**
     * mark model as has pending changes state
     * @param model
     */
    removePendingChanges(model: any): void;
    /**
     * get persistence identifier from model
     * @param model
     * @returns {string}
     */
    private getPersistanceIdentifier(model);
    /**
     * get firebase path
     * @param model
     * @returns {any}
     */
    private getFirebasePath(model);
}
